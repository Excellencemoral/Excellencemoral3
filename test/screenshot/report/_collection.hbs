{{#createDetailsElement
    'report-collection'
    ''
    isOpenByDefault
    screenshotArray.length
    collectionType
}}
  <summary class="report-collection__heading">
    {{#createCheckboxElement
        'report-collection__checkbox'
        'report-collection__checkbox--hidden'
        showApprovalControls
        screenshotArray.length
        collectionType
    }}{{/createCheckboxElement}}
    {{formatNumber screenshotArray.length}}
    <strong>{{heading}}</strong>
    {{#createApprovalStatusElement
        'report-review-status report-review-status--collection'
        'report-review-status--hidden'
        showApprovalControls
        screenshotArray.length
        collectionType
    }}{{/createApprovalStatusElement}}
  </summary>
  <div class="report-collection__content">
    {{#if screenshotArray.length}}
      {{#forEachTestPage screenshotPageMap}}
        {{#createDetailsElement
            'report-html-file'
            ''
            true
            screenshot_array.length
            ../collectionType
            html_file_path
        }}
          <summary class="report-html-file__heading">
            {{#createCheckboxElement
                'report-html-file__checkbox'
                'report-html-file__checkbox--hidden'
                screenshot_array.length
                ../showApprovalControls
                ../collectionType
                html_file_path
            }}{{/createCheckboxElement}}
            <strong>{{formatNumber screenshot_array.length}}</strong>
            in
            <strong>{{html_file_path}}</strong>
            {{getHtmlFileLinks}}
            {{#createApprovalStatusElement
                'report-review-status report-review-status--html-file'
                'report-review-status--hidden'
                screenshot_array.length
                ../showApprovalControls
                ../collectionType
                html_file_path
            }}{{/createApprovalStatusElement}}
          </summary>
          <div class="report-html-file__content">
            {{#each screenshot_array}}
              {{#createDetailsElement
                  'report-user-agent'
                  ''
                  true
                  ../screenshot_array.length
                  ../../collectionType
                  ../html_file_path
                  user_agent.alias
              }}
                <summary class="report-user-agent__heading">
                  {{#createCheckboxElement
                      'report-user-agent__checkbox'
                      'report-user-agent__checkbox--hidden'
                      1
                      ../../showApprovalControls
                      ../../collectionType
                      ../html_file_path
                      user_agent.alias
                  }}{{/createCheckboxElement}}
                  <img src="{{user_agent.icon_url}}"
                       class="report-user-agent__icon"
                       title="{{user_agent.navigator.browser_name}}">
                  <strong>{{user_agent.alias}}</strong>
                  (
                    {{~user_agent.navigator.browser_name}} {{user_agent.navigator.browser_version}}
                    on
                    {{user_agent.navigator.os_name}} {{user_agent.navigator.os_version~}}
                  )
                  {{#createApprovalStatusElement
                      'report-review-status report-review-status--user-agent'
                      'report-review-status--hidden'
                      1
                      ../../showApprovalControls
                      ../../collectionType
                      ../html_file_path
                      user_agent.alias
                  }}{{/createApprovalStatusElement}}
                </summary>
                <div class="report-user-agent__content">
                  <div class="report-user-agent__image-cell">
                    <div class="report-user-agent__image-heading">
                      <span class="report-user-agent__image-type"
                            title="Previously-approved screenshot image">Golden</span>:
                      <div class="report-user-agent__image-dimensions">
                        {{~diff_image_result.expected_image_dimensions.width~}}
                        x
                        {{~diff_image_result.expected_image_dimensions.height~}}
                      </div>
                    </div>
                    {{> image expected_image_file}}
                  </div>
                  <div class="report-user-agent__image-cell">
                    <div class="report-user-agent__image-heading">
                      <span class="report-user-agent__image-type"
                            title="Pixels that have changed are shown in pink">Diff</span>:
                      {{#if diff_image_result.changed_pixel_count}}
                        <strong>{{formatNumber diff_image_result.changed_pixel_count}}</strong>
                        pixels changed
                        ({{diff_image_result.changed_pixel_percentage}}%)
                      {{/if}}
                      <div class="report-user-agent__image-dimensions">
                        {{~diff_image_result.diff_image_dimensions.width~}}
                        x
                        {{~diff_image_result.diff_image_dimensions.height~}}
                      </div>
                    </div>
                    {{> image diff_image_file}}
                  </div>
                  <div class="report-user-agent__image-cell">
                    <div class="report-user-agent__image-heading">
                      <span class="report-user-agent__image-type"
                            title="Newly-captured screenshot image">Snapshot</span>:
                      <div class="report-user-agent__image-dimensions">
                        {{~diff_image_result.actual_image_dimensions.width~}}
                        x
                        {{~diff_image_result.actual_image_dimensions.height~}}
                      </div>
                    </div>
                    {{> image actual_image_file}}
                  </div>
                </div>
              {{/createDetailsElement}}
            {{/each}}
          </div>
        {{/createDetailsElement}}
      {{/forEachTestPage}}
    {{else}}
      <div class="report-congrats">Woohoo! ðŸŽ‰</div>
    {{/if}}
  </div>
{{/createDetailsElement}}
